---
description: Stage されたファイルのみを確認し、適切なコメントでコミットを作成する
allowed-tools: [Bash, Read, Edit]
---

# スマートコミット（Staged 版）

## 実行前提

- `git add` 済みファイル **のみ** を対象とする  
  _unstaged 変更・untracked ファイルは無視_

## 実行手順

1. **作業計画の作成**

   - 変更調査 → グループ化 → コミット の流れを整理

2. **ステージ状況の確認**

   - `git diff --cached --stat` で概要を確認
   - `git diff --cached` で詳細を確認

3. **変更内容のグループ化**

   - 機能追加／バグ修正／リファクタリング／スタイル修正 … に分類
   - 関連ファイルをまとめて “1 コミット = 1 つの論理変更” の粒度に整理

4. **コミットの作成**

   - 各グループごとに `git commit -m "<subject>" -m "<body>"` を実行
   - メッセージは **Conventional Commits** 形式 + 日本語ボディ

     ```
     <type>(<scope>): <subject>

     <body — 何を・なぜ。必要なら箇条書き>
     ```

5. **品質チェック**
   - Lint / テスト / ビルドが通ることを確認
   - `git status --porcelain` が空であることを確認

## 注意事項

- **必ず** 品質チェック後にコミットする
- エラー・警告は出来る限り解消してからコミット
- プロジェクト固有のビルド／テストコマンドがあれば実行して確認
